[ldap_auth]
    ; NOTE: for all of the following configurations, if the key is suffixed in "DN", ldap_auth
    ; will expect you to provide a real LDAP Distinguished Name.

    ; If you use handle_admin_role to assign your system admins, specify the authentication handlers it should
    ; query here. See SystemAdminRoleName for more details.
    AuthenticationHandlers = {couch_httpd_auth, cookie_authentication_handler}, {ldap_auth, handle_basic_auth_req}

    ; Enable SSL to the LDAP server.
    UseSsl = false

    ; The LDAP servers to use for searches and authentication, separated by commas. These will be tried in-order.
    LdapServers = 192.168.1.110, 192.168.1.111, sbs-2011.cordaware.local

    ; The DN to narrow the scope of searches for users and groups.
    BaseDN = DC=cordaware,DC=local

    ; ldap_auth will use this user DN and password to search for users trying to authenticate.
    ; if you have anonymous LDAP queries enabled (not recommended) you may simply provide the
    ; `anon` CN and a blank password.
    SearchUserDN = CN=CSTT,OU=SBSUsers,OU=Users,OU=MyBusiness,DC=Cordaware,DC=local
    SearchUserPassword = CW$cstt2014

    ; On ActiveDirectory, you might choose from:
    ; - sAMAccountName, e.g. jsmith
    ; - userPrincipalName, e.g. jsmith@example.com
    ;   NOTE: if you use userPrincipalName, be sure to URL-encode the username when using basic auth.
    ;   e.g. http://jsmith%40example.com:password@example.com:5984
    UserDNMapAttr = sAMAccountName

    ; The LDAP attribute of the group to use as the role name.
    GroupDNMapAttr = name

    ; The role to grant system administrative privileges to.
    ; If you include {ldap_auth, handle_admin_role} in your authentication_handlers, it will
    ; grant the system admin role to anyone who has this role assigned. BE CAREFUL.
    SystemAdminRoleName = schema-admins




wget http://bestinformed002.cordaware.com/cstt/ca_sbs.pem
wget http://bestinformed002.cordaware.com/cstt/cstt.cordaware.com.pem
wget http://bestinformed002.cordaware.com/cstt/serverkey.pem

vi /usr/local/etc/couchdb/local.ini

[ssl]
cacert_file = /usr/local/ssl/ca_sbs.pem
cert_file = /usr/local/ssl/cstt.cordaware.com.pem
key_file = /usr/local/ssl/serverkey.pem
password = CW$cstt2014



cd /usr/local/lib/couchdb/erlang/lib/couch-1.6.0/ebin

wget http://bestinformed002.cordaware.com/cstt/binstr.beam			
wget http://bestinformed002.cordaware.com/cstt/gen_smtp_client.beam		
wget http://bestinformed002.cordaware.com/cstt/ldap_auth.app			
wget http://bestinformed002.cordaware.com/cstt/ldap_auth_config.beam		
wget http://bestinformed002.cordaware.com/cstt/mimemail.beam			
wget http://bestinformed002.cordaware.com/cstt/smtp_rfc822_parse.yrl		
wget http://bestinformed002.cordaware.com/cstt/socket.beam
wget http://bestinformed002.cordaware.com/cstt/gen_smtp.app			
wget http://bestinformed002.cordaware.com/cstt/gen_smtp_server.beam		
wget http://bestinformed002.cordaware.com/cstt/ldap_auth.beam			
wget http://192.168.1.200/cstt/ldap_auth_gateway.beam		
wget http://bestinformed002.cordaware.com/cstt/smtp_rfc822_parse.beam		
wget http://bestinformed002.cordaware.com/cstt/smtp_server_example.beam
wget http://bestinformed002.cordaware.com/cstt/cstt_httpd_handler.beam		
wget http://bestinformed002.cordaware.com/cstt/gen_smtp_application.beam	
wget http://bestinformed002.cordaware.com/cstt/gen_smtp_server_session.beam
wget http://bestinformed002.cordaware.com/cstt/smtp_util.beam

chown -R couchdb:couchdb /usr/local/etc/couchdb
chown -R couchdb:couchdb /usr/local/var/lib/couchdb
chown -R couchdb:couchdb /usr/local/var/log/couchdb
chown -R couchdb:couchdb /usr/local/var/run/couchdb
chown -R couchdb:couchdb /usr/local/ssl
chown -R couchdb:couchdb /usr/local/lib/couchdb/erlang/lib/couch-1.6.0/ebin
chmod 0770 /usr/local/lib/couchdb/erlang/lib/couch-1.6.0/ebin

chmod 0770 /usr/local/etc/couchdb
chmod 0770 /usr/local/var/lib/couchdb
chmod 0770 /usr/local/var/log/couchdb
chmod 0770 /usr/local/var/run/couchdb
chmod 0770 /usr/local/ssl
    

chown -R couchdb: /usr/local/var/{lib,log,run}/couchdb /usr/local/etc/couchdb
chmod 0770 /usr/local/var/{lib,log,run}/couchdb/
chmod 664 /usr/local/etc/couchdb/*.ini
chmod 775 /usr/local/etc/couchdb/*.d